{"version":3,"sources":["public/js/login.js"],"names":["loginForm","document","getElementById","addEventListener","event","preventDefault","email","querySelector","value","password","userDetails","loginOptions","createOptions","loginUser","options","response","fetch","data","json","status","innerHTML","msg","code","classList","localStorage","setItem","username","window","open","method","headers","body","JSON","stringify"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAlB;AAEAF,SAAS,CAACG,gBAAV,CAA2B,QAA3B,EAAqCC,KAAK,IAAI;AAC5CA,EAAAA,KAAK,CAACC,cAAN;AACA,QAAMC,KAAK,GAAGL,QAAQ,CAACM,aAAT,CAAuB,YAAvB,EAAqCC,KAAnD;AACA,QAAMC,QAAQ,GAAGR,QAAQ,CAACM,aAAT,CAAuB,gBAAvB,EAAyCC,KAA1D;AAEA,QAAME,WAAW,GAAG;AAAEJ,IAAAA,KAAF;AAASG,IAAAA;AAAT,GAApB;AACA,QAAME,YAAY,GAAGC,aAAa,CAACF,WAAD,CAAlC;AACAG,EAAAA,SAAS,CAACF,YAAD,CAAT;AACD,CARD;;AAUA,eAAeE,SAAf,CAAyBC,OAAzB,EAAkC;AAChC,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,0CAD0B,EAE1BF,OAF0B,CAA5B;AAIA,QAAMG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAnB;AAEA,QAAMC,MAAM,GAAGlB,QAAQ,CAACM,aAAT,CAAuB,eAAvB,CAAf;AACAY,EAAAA,MAAM,CAACC,SAAP,GAAmBH,IAAI,CAACI,GAAxB,CARgC,CAUhC;;AACA,MAAIJ,IAAI,CAACK,IAAL,KAAc,GAAlB,EAAuB;AACrBH,IAAAA,MAAM,CAACI,SAAP,GAAmB,+CAAnB;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCR,IAAI,CAAC,YAAD,CAAvC;AACAO,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCR,IAAI,CAACS,QAAtC;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAY,aAAZ,EAA2B,OAA3B;AACD,GALD,MAKO;AACLT,IAAAA,MAAM,CAACI,SAAP,GAAmB,mCAAnB;AACD;AACF,EAED;;;AACA,SAASX,aAAT,CAAuBK,IAAvB,EAA6B;AAC3B,QAAMH,OAAO,GAAG;AACde,IAAAA,MAAM,EAAE,MADM;AAEdC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFK;AAKdC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAehB,IAAf;AALQ,GAAhB;AAOA,SAAOH,OAAP;AACD","file":"login.786484c3.js","sourceRoot":"..\\src","sourcesContent":["const loginForm = document.getElementById(\"loginForm\");\r\n\r\nloginForm.addEventListener(\"submit\", event => {\r\n  event.preventDefault();\r\n  const email = document.querySelector(\"#user_mail\").value;\r\n  const password = document.querySelector(\"#user_password\").value;\r\n\r\n  const userDetails = { email, password };\r\n  const loginOptions = createOptions(userDetails);\r\n  loginUser(loginOptions);\r\n});\r\n\r\nasync function loginUser(options) {\r\n  const response = await fetch(\r\n    \"http://94.231.110.64:3000/api/user/login\",\r\n    options\r\n  );\r\n  const data = await response.json();\r\n\r\n  const status = document.querySelector(\"#login-status\");\r\n  status.innerHTML = data.msg;\r\n  \r\n  //Return to frontpage if log in is successful\r\n  if (data.code === 200) {\r\n    status.classList = \"teal lighten-2 text-box card-panel text-white\";\r\n    localStorage.setItem(\"auth-token\", data[\"auth-token\"]);\r\n    localStorage.setItem(\"username\", data.username);\r\n    window.open(\"/index.html\", \"_self\");\r\n  } else {\r\n    status.classList = \"red lighten-2 text-box card-panel\";\r\n  }\r\n}\r\n\r\n//Managing post options\r\nfunction createOptions(data) {\r\n  const options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  };\r\n  return options;\r\n}\r\n"]}